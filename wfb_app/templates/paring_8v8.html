{% extends "base.html" %}
{% block title %}{% endblock %}
{% block content %}

<button type="button" class="btn btn-color rounded-1 pt-1 pb-1">
    <a class="nav-link btn-color" href="{% url 'edit-paring-etc' tournament.id paring.id %}">Edytuj</a>
</button>
<div class="row">
    <div class="m-4 p-4 border-dashed">
        <p><strong>{{ tournament.name }} - Paring: {{ paring.name }}</strong></p>
        <table class="table border-bottom schedules-content">
            <tr class="tab-my2">
                <th></th>
                <th>P1</th>
                <th>P2</th>
                <th>P3</th>
                <th>P4</th>
                <th>P5</th>
                <th>P6</th>
                <th>P7</th>
                <th>P8</th>
                <th>Av</th>
            </tr>
            <tr class="tab-my">
                <th></th>
                <th>{{ paring.op1 }}</th>
                <th>{{ paring.op2 }}</th>
                <th>{{ paring.op3 }}</th>
                <th>{{ paring.op4 }}</th>
                <th>{{ paring.op5 }}</th>
                <th>{{ paring.op6 }}</th>
                <th>{{ paring.op7 }}</th>
                <th>{{ paring.op8 }}</th>
                <th></th>
            </tr>
            {% if tournament.p1 == first_p1 or tournament.p1 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_1 }}: {{ tournament.p1 }}</th>
                {% for i in p1points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>

            {% if tournament.p2 == first_p1 or tournament.p2 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_2 }}: {{ tournament.p2 }}</th>
                {% for i in p2points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p3 == first_p1 or tournament.p3 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_3 }}: {{ tournament.p3 }}</th>
                {% for i in p3points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p4 == first_p1 or tournament.p4 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_4 }}: {{ tournament.p4 }}</th>
                {% for i in p4points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p5 == first_p1 or tournament.p5 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_5 }}: {{ tournament.p5 }}</th>
                {% for i in p5points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p6 == first_p1 or tournament.p6 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_6 }}: {{ tournament.p6 }}</th>
                {% for i in p6points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p7 == first_p1 or tournament.p7 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_7 }}: {{ tournament.p7 }}</th>
                {% for i in p7points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            {% if tournament.p8 == first_p1 or tournament.p8 == first_p2 %}
            <tr class="tab-color-grey">
            {% else %}
            <tr class="tab-my">
            {% endif %}
                <th>{{ tournament.player_name_8 }}: {{ tournament.p8 }}</th>
                {% for i in p8points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
            <tr class="tab-my">
                <th></th>
                {% for i in army_points %}
                {% if i == 0 %}
                <td> {{i}}</td>
                {% elif i < 0 and i >= -1 %}
                <td style="background-color: #ff8080"> {{i}}</td>
                {% elif i < -1 %}
                <td style="background-color: #ff4d4d"> {{i}}</td>
                {% elif i > 0 and i <= 1 %}
                <td style="background-color: #79d279"> {{i}}</td>
                {% elif i > 1 %}
                <td style="background-color: #40bf40"> {{i}}</td>
                {% endif %}
                {% endfor %}
            </tr>
        </table>
    </div>
    <div>
        {% if request.method == 'GET' %}
        <div class="m-4 p-4 border-dashed">
            <form action="" method="POST">
                {{ form.non_field_errors }}
                {{ form.source.errors }}
                {{ form.source }}
                <p><strong>Po 1 parowaniu</strong></p>
                <table class="table border-bottom schedules-content">
                    <tr class="tab-my2">
                        <th></th>
                        <th>Gracz</th>
                        <th>Przeciwnik</th>
                    </tr>
                    <tr>
                        <th> Pierwsza para</th>
                        <td>{{ form.first_p1 }}</td>
                        <td>{{ form.first_op1 }}</td>
                    </tr>
                    <tr>
                        <th> Druga para</th>
                        <td>{{ form.first_p2 }}</td>
                        <td>{{ form.first_op2 }}</td>
                    </tr>
                </table>
                <input class="btn btn-color rounded-1 pt-1 pb-1" type="submit" value="Szacuj">
                {% csrf_token %}

            </form>
        </div>
        {% endif %}
    </div>
</div>
{% if request.method == 'GET' %}
<div class="col">
    <div class="dashboard-alerts row">
        <div class="m-4 p-4 alert-item alert-green">
            <span class="font-weight-bold">Dobrych paringów: {{ green_p|stringformat:"d%%" }} ({{ green }})</span>
        </div>
        <div class="m-4 p-4 alert-item alert-yellow">
            <span class="font-weight-bold">Remisowych paringów: {{ yellow_p|stringformat:"d%%" }} ({{ yellow }})</span>
        </div>
        <div class="m-4 p-4 alert-item alert-red">
            <span class="font-weight-bold">Złych paringów: {{ red_p|stringformat:"d%%" }} ({{ red }})</span>
        </div>
    </div>
</div>

<div class="row">
    <div class="m-4 p-4 border-dashed">
        <p><strong>Rozklad procentowy paringow dla kazdej wystawki</strong></p>
        <table class="table border-bottom schedules-content">
            <tr class="tab-my2">
                <th></th>
                <th>{{ tournament.player_name_1 }}: {{ tournament.p1 }}</th>
                <th>{{ tournament.player_name_2 }}: {{ tournament.p2 }}</th>
                <th>{{ tournament.player_name_3 }}: {{ tournament.p3 }}</th>
                <th>{{ tournament.player_name_4 }}: {{ tournament.p4 }}</th>
                <th>{{ tournament.player_name_5 }}: {{ tournament.p5 }}</th>
                <th>{{ tournament.player_name_6 }}: {{ tournament.p6 }}</th>
                <th>{{ tournament.player_name_7 }}: {{ tournament.p7 }}</th>
                <th>{{ tournament.player_name_8 }}: {{ tournament.p8 }}</th>
            </tr>
            <tr class="tab-my">
                <th></th>
            </tr>
        </table>
    </div>
</div>

<!--<div><p></p></div>-->
<!--<div class="col">-->
<!--    <p><strong>6 najlepszych możliwych parowań:</strong></p>-->

<!--</div>-->
<!--{% for data in data_list %}-->
<!--<div class="m-4 p-4 border-dashed">-->
<!--    <table class="table border-bottom schedules-content">-->
<!--        <tr class="tab-my2">-->
<!--            <th>Gracz</th>-->
<!--            <th>Przeciwnik</th>-->
<!--            <th>Punkty</th>-->
<!--            <th></th>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.0.0 }}</td>-->
<!--            <td>{{ data.0.0.1 }}</td>-->
<!--            <td>{{ data.1.0 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.1.0 }}</td>-->
<!--            <td>{{ data.0.1.1 }}</td>-->
<!--            <td>{{ data.1.1 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.2.0 }}</td>-->
<!--            <td>{{ data.0.2.1 }}</td>-->
<!--            <td>{{ data.1.2 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.3.0 }}</td>-->
<!--            <td>{{ data.0.3.1 }}</td>-->
<!--            <td>{{ data.1.3 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.4.0 }}</td>-->
<!--            <td>{{ data.0.4.1 }}</td>-->
<!--            <td>{{ data.1.4 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.5.0 }}</td>-->
<!--            <td>{{ data.0.5.1 }}</td>-->
<!--            <td>{{ data.1.5 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.6.0 }}</td>-->
<!--            <td>{{ data.0.6.1 }}</td>-->
<!--            <td>{{ data.1.6 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.7.0 }}</td>-->
<!--            <td>{{ data.0.7.1 }}</td>-->
<!--            <td>{{ data.1.7 }}</td>-->
<!--        </tr>-->
<!--        {% if data.2 > 81 %}-->
<!--        <tr class="tab-color-green">-->
<!--            {% elif data.2 < 79 %}-->
<!--        <tr class="tab-color-red">-->
<!--            {% else %}-->
<!--        <tr class="tab-color-yellow">-->
<!--            {% endif %}-->
<!--            <td></td>-->
<!--            <td>Total</td>-->
<!--            <th>{{ data.2 }}</th>-->
<!--        </tr>-->
<!--    </table>-->
<!--</div>-->
<!--{% endfor %}-->
<!--<div class="col">-->
<!--    <p><strong>6 najmniej korzystnych parowań:</strong></p>-->
<!--</div>-->
<!--{% for data in data_list_bad %}-->
<!--<div class="m-4 p-4 border-dashed">-->
<!--    <table class="table border-bottom schedules-content">-->
<!--        <tr class="tab-my2">-->
<!--            <th>Gracz</th>-->
<!--            <th>Przeciwnik</th>-->
<!--            <th>Punkty</th>-->
<!--            <th></th>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.0.0 }}</td>-->
<!--            <td>{{ data.0.0.1 }}</td>-->
<!--            <td>{{ data.1.0 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.1.0 }}</td>-->
<!--            <td>{{ data.0.1.1 }}</td>-->
<!--            <td>{{ data.1.1 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.2.0 }}</td>-->
<!--            <td>{{ data.0.2.1 }}</td>-->
<!--            <td>{{ data.1.2 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.3.0 }}</td>-->
<!--            <td>{{ data.0.3.1 }}</td>-->
<!--            <td>{{ data.1.3 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.4.0 }}</td>-->
<!--            <td>{{ data.0.4.1 }}</td>-->
<!--            <td>{{ data.1.4 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.5.0 }}</td>-->
<!--            <td>{{ data.0.5.1 }}</td>-->
<!--            <td>{{ data.1.5 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.6.0 }}</td>-->
<!--            <td>{{ data.0.6.1 }}</td>-->
<!--            <td>{{ data.1.6 }}</td>-->
<!--        </tr>-->
<!--        <tr class="tab-my">-->
<!--            <td>{{ data.0.7.0 }}</td>-->
<!--            <td>{{ data.0.7.1 }}</td>-->
<!--            <td>{{ data.1.7 }}</td>-->
<!--        </tr>-->
<!--        {% if data.2 > 81 %}-->
<!--        <tr class="tab-color-green">-->
<!--            {% elif data.2 < 79 %}-->
<!--        <tr class="tab-color-red">-->
<!--            {% else %}-->
<!--        <tr class="tab-color-yellow">-->
<!--            {% endif %}-->
<!--            <td></td>-->
<!--            <td>Total</td>-->
<!--            <th>{{ data.2 }}</th>-->
<!--        </tr>-->
<!--    </table>-->
<!--</div>-->
<!--{% endfor %}-->
{% elif request.method == 'POST' %}
<div class="col">
    <div class="dashboard-alerts row">
        <div class="m-4 p-4 alert-item alert-green">
            <span class="font-weight-bold">Dobrych paringów: {{ green_p|stringformat:"d%%" }} ({{ green }})</span>
        </div>
        <div class="m-4 p-4 alert-item alert-yellow">
            <span class="font-weight-bold">Remisowych paringów: {{ yellow_p|stringformat:"d%%" }} ({{ yellow }})</span>
        </div>
        <div class="m-4 p-4 alert-item alert-red">
            <span class="font-weight-bold">Złych paringów: {{ red_p|stringformat:"d%%" }} ({{ red }})</span>
        </div>
    </div>
</div>
<div class="col">
    <div class="dashboard-alerts row">
        <div class="m-4 p-4 alert-item alert-info">
            <span class="font-weight-bold">Najlepsze mozliwe wystawki:</br>
                <i>(Armia: ilość paringów z 13+ pkt)</i></br>
                {% for army, rating in best_armies.items %}
                {{ army }} : {{ rating }}</br>
                {% endfor %}
            </span>
        </div>
    </div>
</div>
<!--<div class="col">-->
<!--    <p><strong>Mozliwe kolejne parowania</strong></p>-->

<!--</div>-->
<!--{% for data in filtered_list %}-->
<!--<div class="m-4 p-4 border-dashed">-->
<!--    <table class="table border-bottom schedules-content">-->
<!--        <tr class="tab-my2">-->
<!--            <th>Gracz</th>-->
<!--            <th>Przeciwnik</th>-->
<!--            <th>Punkty</th>-->
<!--            <th></th>-->
<!--        </tr>-->
<!--        {% if data.0.0.0 == first_p1 or data.0.0.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.0.0 }}</td>-->
<!--            <td>{{ data.0.0.1 }}</td>-->
<!--            <td>{{ data.1.0 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.1.0 == first_p1 or data.0.1.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.1.0 }}</td>-->
<!--            <td>{{ data.0.1.1 }}</td>-->
<!--            <td>{{ data.1.1 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.2.0 == first_p1 or data.0.2.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.2.0 }}</td>-->
<!--            <td>{{ data.0.2.1 }}</td>-->
<!--            <td>{{ data.1.2 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.3.0 == first_p1 or data.0.3.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.3.0 }}</td>-->
<!--            <td>{{ data.0.3.1 }}</td>-->
<!--            <td>{{ data.1.3 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.4.0 == first_p1 or data.0.4.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.4.0 }}</td>-->
<!--            <td>{{ data.0.4.1 }}</td>-->
<!--            <td>{{ data.1.4 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.5.0 == first_p1 or data.0.5.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.5.0 }}</td>-->
<!--            <td>{{ data.0.5.1 }}</td>-->
<!--            <td>{{ data.1.5 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.6.0 == first_p1 or data.0.6.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.6.0 }}</td>-->
<!--            <td>{{ data.0.6.1 }}</td>-->
<!--            <td>{{ data.1.6 }}</td>-->
<!--        </tr>-->
<!--        {% if data.0.7.0 == first_p1 or data.0.7.0 == first_p2 %}-->
<!--        <tr class="tab-color-grey">-->
<!--            {% else %}-->
<!--        <tr class="tab-my">-->
<!--            {% endif %}-->
<!--            <td>{{ data.0.7.0 }}</td>-->
<!--            <td>{{ data.0.7.1 }}</td>-->
<!--            <td>{{ data.1.7 }}</td>-->
<!--        </tr>-->
<!--        {% if data.2 > 81 %}-->
<!--        <tr class="tab-color-green">-->
<!--            {% elif data.2 < 79 %}-->
<!--        <tr class="tab-color-red">-->
<!--            {% else %}-->
<!--        <tr class="tab-color-yellow">-->
<!--            {% endif %}-->
<!--            <td></td>-->
<!--            <td>Total</td>-->
<!--            <th>{{ data.2 }}</th>-->
<!--        </tr>-->
<!--    </table>-->
<!--</div>-->
<!--{% endfor %}-->
{% endif %}
<!--<table>-->
<!--    <tr>-->
<!--        <th class="tab-color-green"> 81-160 pkt</th>-->
<!--    </tr>-->
<!--    <tr>-->
<!--        <th class="tab-color-yellow"> 79-81 pkt</th>-->
<!--    </tr>-->
<!--    <tr>-->
<!--        <th class="tab-color-red"> 0-78 pkt/th>-->
<!--    </tr>-->
<!--</table>-->
{% endblock content %}