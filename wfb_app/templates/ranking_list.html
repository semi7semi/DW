{% extends "base.html" %}
{% block title %}{% endblock %}
{% block content %}
<h1>Ranking</h1>
    <div class="col-1">
        {% if request.user.is_authenticated %}
        <div class="nav nav-pills nav-justified">
            <a class="nav-link btn-color" href="/ranking/add_result/">Dodaj wynik</a>
        </div>
        {% endif %}
    </div>
        <table class="table border-bottom schedules-content css-serial">
            <tr>
                <th>
                    <form action="" method="POST">
                    <button class="btn btn-secondary rounded-1" type="submit" name="option" value="name_sort">Sortuj</button>
                    {% csrf_token %}
                    </form>
                </th>
                <th>
                    <form action="" method="POST">
                    <button class="btn btn-secondary rounded-1" type="submit" name="option" value="points_sort">Sortuj</button>
                    {% csrf_token %}
                    </form>
                </th>
                <th></th>
                <th>
                    <form action="" method="POST">
                    <button class="btn btn-secondary rounded-1" type="submit" name="option" value="rank_sort">Sortuj</button>
                    {% csrf_token %}
                    </form>
                </th>
                <th>
                    <form action="" method="POST">
                    <button class="btn btn-secondary rounded-1" type="submit" name="option" value="opponent_sort">Sortuj</button>
                    {% csrf_token %}
                    </form>
                </th>
                <th>
                    <form action="" method="POST">
                    <button class="btn btn-secondary rounded-1" type="submit" name="option" value="date_sort">Sortuj</button>
                    {% csrf_token %}
                    </form>
                </th>
            </tr>

            <tr>
                <th>Nickname</th>
                <th>Punkty</th>
                <th>Objective (<span style="color: green">tak</span>/<span style="color: red">nie</span>)</th>
                <th>Ranga turnieju/gry</th>
                <th>Przeciwnik</th>
                <th>Data</th>
<!--                <th></th>-->
            </tr>
            {% for result in ranking %}
            <tr class="numbering">
                <td><a class="user-color" href="/user_details/{{ result.user.id }}/">{{ result.user }}</a></td>
                <td>{{ result.battle_points }}</td>
                {% if result.objective %}
                    <<td style="color: green">{{ result.get_objective_type_display  }}</td>
                {% else %}
                    <td style="color: red">{{ result.get_objective_type_display  }}</td>
                {% endif %}
                <td>{{ result.get_game_rank_display  }}</td>
                <td>{{ result.opponent  }}</td>
                <td>{{ result.date  }}</td>
<!--                {% if request.user.username == result.user.username %}-->
<!--                <td><a class="btn btn-secondary rounded-1" href="/ranking/edit/{{ result.id }}/">Edytuj</a></td>-->
<!--                {% endif %}-->
            </tr>
            {% endfor %}
        </table>
        <div class="pagination">
                        <span class="step-links">
                        {% if ranking.has_previous %}
                            <a href="?page={{ ranking.previous_page_number }}"> < Poprzednia </a> |
                        {% endif %}

                        {% for page in ranking.paginator.page_range %}
                            {% if ranking.number == page %}
                            <span>
                                 {{ page }} |
                            </span>
                            {% else %}
                            <span>
                                <a href="?page={{ page }}"> {{ page }} </a> |
                            </span>
                            {% endif %}
                        {% endfor %}

                        {% if ranking.has_next %}
                            <a href="?page={{ ranking.next_page_number }}"> Nastepna > </a>
                        {% endif %}
                        </span>
        </div>
        <div class="row">
            <div class="col-2">
                <div class="nav flex-column nav-pills">
                    <a class="nav-link btn-color" href="/">Powr√≥t</a>
                </div>
            </div>
        </div>

{% endblock %}